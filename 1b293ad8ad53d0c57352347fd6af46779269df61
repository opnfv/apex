{
  "comments": [
    {
      "key": {
        "uuid": "1a486d77_5fac8aed",
        "filename": "ci/deploy.sh",
        "patchSetId": 1
      },
      "lineNbr": 978,
      "author": {
        "id": 3889
      },
      "writtenOn": "2016-04-11T20:55:39Z",
      "side": 1,
      "message": "Instead of trusting return code from openstack cli, why not run debug_stack anyway, that way, if there are errors but return code is 0, you\u0027ll see the issue. And if there isn\u0027t an error, the output can be empty, making it transparent to user.",
      "revId": "1b293ad8ad53d0c57352347fd6af46779269df61",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a486d77_1f48525a",
        "filename": "ci/deploy.sh",
        "patchSetId": 1
      },
      "lineNbr": 982,
      "author": {
        "id": 235
      },
      "writtenOn": "2016-04-11T19:09:46Z",
      "side": 1,
      "message": "Can you add a non-zero exit from the ssh command and then check it to bail if the overcloud fails... all the stuff after this should not run if the overcloud fails to deploy successfully.",
      "revId": "1b293ad8ad53d0c57352347fd6af46779269df61",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a486d77_9f7322b1",
        "filename": "ci/deploy.sh",
        "patchSetId": 1
      },
      "lineNbr": 982,
      "author": {
        "id": 334
      },
      "writtenOn": "2016-04-11T19:54:53Z",
      "side": 1,
      "message": "Sure, but I\u0027m not sure its going to help without addressing another issue.  If you look at https://build.opnfv.org/ci/job/apex-deploy-virtual-os-nosdn-nofeature-ha-master/36/console, even if ssh reports a non-zero exit code, the script still runs the keystone stuff...not sure why",
      "parentUuid": "1a486d77_1f48525a",
      "revId": "1b293ad8ad53d0c57352347fd6af46779269df61",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a486d77_bfa5be05",
        "filename": "ci/deploy.sh",
        "patchSetId": 1
      },
      "lineNbr": 982,
      "author": {
        "id": 3889
      },
      "writtenOn": "2016-04-11T20:55:39Z",
      "side": 1,
      "message": "The script shouldn\u0027t stop today, right. Since the next check is for debug flag only. A new ssh session is established. It seems like a better way would be to compile a command list then send the list to a single session depending on if debug flag is set.",
      "parentUuid": "1a486d77_9f7322b1",
      "revId": "1b293ad8ad53d0c57352347fd6af46779269df61",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a486d77_7f418638",
        "filename": "ci/util.sh",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 235
      },
      "writtenOn": "2016-04-11T19:09:46Z",
      "side": 1,
      "message": "I think since there are actions that this script can handle it make more sense not to use the \"-\" syntax atleast for the main action. \"util undercloud\" or \"util u\" then pass -- args to those actions",
      "revId": "1b293ad8ad53d0c57352347fd6af46779269df61",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a486d77_7f6866ba",
        "filename": "ci/util.sh",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 334
      },
      "writtenOn": "2016-04-11T19:54:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1a486d77_7f418638",
      "revId": "1b293ad8ad53d0c57352347fd6af46779269df61",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a486d77_5f3ecab9",
        "filename": "lib/utility-functions.sh",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 235
      },
      "writtenOn": "2016-04-11T19:09:46Z",
      "side": 1,
      "message": "I think we should pass the username in to this so it doesn\u0027t automatically assume root. That way if file operations are done they can be done as non-root users and be owned properly",
      "revId": "1b293ad8ad53d0c57352347fd6af46779269df61",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a486d77_5f65aadf",
        "filename": "lib/utility-functions.sh",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 334
      },
      "writtenOn": "2016-04-11T19:54:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1a486d77_5f3ecab9",
      "revId": "1b293ad8ad53d0c57352347fd6af46779269df61",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a486d77_3fb9ce2e",
        "filename": "lib/utility-functions.sh",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 3889
      },
      "writtenOn": "2016-04-11T20:55:39Z",
      "side": 1,
      "message": "This method of getting IP address seems to be implemented at a few places, I feel like this should be a library call itself, especially considering this implementation assumes undercloud to be IPv4.",
      "range": {
        "startLine": 11,
        "startChar": 18,
        "endLine": 11,
        "endChar": 21
      },
      "revId": "1b293ad8ad53d0c57352347fd6af46779269df61",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a486d77_3f4b0e5b",
        "filename": "lib/utility-functions.sh",
        "patchSetId": 1
      },
      "lineNbr": 24,
      "author": {
        "id": 235
      },
      "writtenOn": "2016-04-11T19:09:46Z",
      "side": 1,
      "message": "seems like this shouldn\u0027t be hard coded to a user. if the username thing is changed for the undercloud connect then that could clean this up.",
      "revId": "1b293ad8ad53d0c57352347fd6af46779269df61",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a486d77_3f62eed8",
        "filename": "lib/utility-functions.sh",
        "patchSetId": 1
      },
      "lineNbr": 24,
      "author": {
        "id": 334
      },
      "writtenOn": "2016-04-11T19:54:53Z",
      "side": 1,
      "message": "I think the stackrc file is the same between /root and /home/stack.  There is essentially only one, but will change it to be ~/stackrc.",
      "parentUuid": "1a486d77_3f4b0e5b",
      "revId": "1b293ad8ad53d0c57352347fd6af46779269df61",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    }
  ]
}